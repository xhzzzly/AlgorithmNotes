## 关键词

题CF2062C（等效操作简化，序列）



## 解法

可以试出，如果能进行两步操作的话，先倒置再差分，和先差分再倒置，两种操作后的序列和只在正负上有差别，即只看绝对值的话，他们是等效的。所以如果能进行2步操作（即倒置、差分），操作后的结果是和操作顺序无关的。

```cpp
// #pragma GCC optimize(2)
#include <cassert>
#include <cctype>
#include <climits>
#include <cmath>
#include <cstddef>
#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <ctime>
#include <cstdint>
#include <algorithm>
#include <bitset>
#include <deque>
#include <fstream>
#include <functional>
#include <iomanip>
#include <ios>
#include <iostream>
#include <istream>
#include <iterator>
#include <list>
#include <map>
#include <memory>
#include <new>
#include <numeric>
#include <ostream>
#include <queue>
#include <set>
#include <sstream>
#include <stack>
#include <string>
#include <utility>
#include <vector>
#include <array>
#include <initializer_list>
#include <regex>
#include <tuple>
#include <unordered_map>
#include <unordered_set>

#define rep(a, b, c) for (int a = (b); a <= (c); ++a)
#define per(a, b, c) for (int a = (b); a >= (c); --a)
#define ft first
#define sd second
#define pb push_back
#define eb emplace_back
#define all(x) x.begin(), x.end()
#define all2(x) x.begin() + 1, x.end()
#define chmin(a, b) if (a > (b)) a = (b)
#define chmax(a, b) if (a < (b)) a = (b)
#define lowbit(x) ((x) & -(x))
using namespace std;
using pii = pair<int, int>;
using ll = long long;

void solve(const signed &caseNumber);

signed main() {
    ios::sync_with_stdio(false); cin.tie(nullptr); cout.tie(nullptr);

    int T = 1;

    cin >> T;

    rep(i, 1, T) {
        solve(i);
    }

    return 0;
}

// Notes in Lexicographical Order

// ALGORITHM
// ForwardIt max_element(ForwardIt first, ForwardIt last)
// ForwardIt max_element(ForwardIt first, ForwardIt last, Compare comp)
//      compare as in sort()

// CLIMITS
// INT_MAX, LONG, LLONG, UINT, ULONG, ULLONG MAX or MIN

// NUMERIC
// iota(FowardIt first, FowardIt last, T value)

// STRING
// substr(size_type pos = 0, size_type count = npos)

// VECTOR
// assign(size_type count, const T& value)
// assign(InputIt first, InputIt last)
// erase(iterator pos)
// erase(iterator first, iterator last)
// resize(size_type count)
// resize(size_type count, const value_type& value)

// For more than one cases



void solve(const signed &caseNumber) {
    int n;
    cin >> n;
    vector<ll> a(n + 1);
    ll sum = 0;
    rep(i, 1, n) {
        cin >> a[i];
        sum += a[i];
    }
    ll ans = sum;
    int len = n;
    rep(i, 1, n - 1) {
        chmax(ans, abs(a[len] - a[1]));
        rep(i, 1, len - 1) a[i] = a[i + 1] - a[i];
        --len;
    } 
    cout << ans << '\n';
}

```

```python
from math import *
def solve():
    n = int(input())
    a = list(map(int, input().split()))
    ans = sum(a)
    length = len(a)
    while length > 1:
        ans = max(ans, abs(a[len(a) - 1] - a[0]))
        a = [a[i + 1] - a[i] for i in range(length - 1)]
        length -= 1
    print(ans)

for _ in range(int(input())):
    solve()

```

